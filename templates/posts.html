{% extends 'index.html' %}
{% block css %}
	<script src='{{static_url("js/mustache.min.js")}}'></script>	
	<script src='{{static_url("js/posts.js")}}'></script>
	<script src='{{static_url("js/remove.js")}}'></script>	
	<link rel='stylesheet' href="{{ static_url('css/modules/post.css') }}">
	<link rel='stylesheet' href="{{ static_url('css/modules/oppost.css') }}">	
	<link rel='stylesheet' href="{{ static_url('css/modules/newpost.css') }}">
{% end %}

{% block title %}/{{board['short']}}/ - #{{ op['count'] }} {% if op['subject'] %} - {{ op['subject'] }}{% end %}{% end %}
{% block catalog %}<a href="/{{board['short']}}/catalog/" class='catalogbtn'>Catalog</a>{% end %}
{% block banner %}
	<div id='actual-header'>
		{% if banner %}
			<img src='/{{banner}}' title='banner' data-goto='/{{board["short"]}}' id='bnr'/>
			<br />
		{% end %}
		<h2 id='board-title'>/{{board['short']}}/ - {{board['name']}}</h2>
		<hr>
	</div>
{% end %}
{% block content %}
	<script type="text/javascript">
		var board="{{board['short']}}";
		var thread="{{op['count']}}";
	</script>
	{% block banner %}
		<div id='actual-header'>
			{% if banner %}
				<img src='/{{banner}}' title='banner'/>
				<br />
			{% end %}
			<h2 id='board-title'>/{{board['short']}}/ - {{board['name']}}</h2>
			<hr>
		</div>
	{% end %}
	{% if not op['locked'] %}
		{% block add %}
			{% module NewPost(name=board['custom'], admin=admin, show=show) %}
		{% end %}
	{% end %}
	<div class='op'>
		{% module OpPost(op, admin, (len(posts) + 1 >= board['thread_bump'])) %}
	</div>
	<div class='posts'>
		{% if posts %}
			{% for post in posts %}
				{% module Post(post, admin) %}
			{% end %}
		{% end %}
	</div>
	{% if admin %}
		<script src='{{static_url("js/banned.js")}}'></script>
		<link rel='stylesheet' href="{{ static_url('css/banform.css') }}">		
		<div class='banform'>
			<form method='POST' action=''>
				<input id='ban-post' disabled type='text'>
				<button id='ban-close'>X</button>
				<div class='ban-expires'>
					<p>Expiration:</p>
					<input type='checkbox' id='ban-never'/>
					<label for='ban-never'>Ban forever?</label>
					<input type='checkbox' id='ban-lock'/>
					<label for='ban-lock'>Lock thread?</label>					
					<div class='ban-expires-div'>
						<p>Pick date of unban</p>
						<input id='ban-expires' type='text' id='datepicker'/>
					</div>
				</div>
				<label for='ban-reason'>Reason:</label>				
				<input type='text' id='ban-reason' maxlength=100 required>
				<input type='Submit' value='Ban' id='ban-submit'>
			</form>
		</div>
	{% end %}
	{% module Template() %}	
	<div class='getnew'>
		<button id='getnew'>Get New Posts</button>
		<span id='newremain'>20</span>
	</div>
{% end %}
